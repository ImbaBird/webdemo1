{
  "version": 3,
  "sources": [
    "webpack:///src/views/repair/add_repair.vue",
    "webpack:///./src/views/repair/add_repair.vue?d70d",
    "webpack:///./src/views/repair/add_repair.vue"
  ],
  "names": [
    "add_repair",
    "name",
    "data",
    "files",
    "type",
    "headerImage",
    "type_val",
    "columns",
    "placeholder",
    "show",
    "fault",
    "uploadImages",
    "methods",
    "onConfirm",
    "values",
    "toString",
    "this",
    "split",
    "join",
    "onSubmit",
    "_this",
    "$loading",
    "image_src",
    "length",
    "Object",
    "es",
    "close",
    "api",
    "then",
    "res",
    "code",
    "success",
    "msg",
    "setTimeout",
    "$router",
    "push",
    "path",
    "fail",
    "getreparilist",
    "_this2",
    "repair_type",
    "console",
    "log",
    "look_img",
    "img",
    "index",
    "images",
    "startPosition",
    "imgclose",
    "e",
    "splice",
    "onRead",
    "file",
    "_this3",
    "asyncToGenerator_default",
    "regenerator_default",
    "a",
    "mark",
    "_callee",
    "self",
    "wrap",
    "_context",
    "prev",
    "next",
    "imgPreview",
    "stop",
    "window",
    "FileReader",
    "test",
    "reader",
    "readAsDataURL",
    "onloadend",
    "result",
    "Image",
    "src",
    "postImg",
    "onload",
    "compress",
    "Orientation",
    "canvas",
    "document",
    "createElement",
    "ctx",
    "getContext",
    "tCanvas",
    "tctx",
    "width",
    "height",
    "ratio",
    "Math",
    "sqrt",
    "fillStyle",
    "fillRect",
    "count",
    "nw",
    "nh",
    "i",
    "j",
    "drawImage",
    "rotateImg",
    "ndata",
    "toDataURL",
    "direction",
    "step",
    "degree",
    "PI",
    "rotate",
    "dataURLtoFile",
    "dataurl",
    "arr",
    "bstr",
    "atob",
    "n",
    "u8arr",
    "Uint8Array",
    "charCodeAt",
    "File",
    "_this4",
    "_callee2",
    "formData",
    "_context2",
    "FormData",
    "append",
    "axios_default",
    "method",
    "url",
    "str",
    "created",
    "repair_add_repair",
    "render",
    "_vm",
    "_h",
    "$createElement",
    "_c",
    "_self",
    "attrs",
    "title",
    "_v",
    "on",
    "submit",
    "label",
    "value",
    "readonly",
    "rules",
    "required",
    "message",
    "click",
    "$event",
    "position",
    "model",
    "callback",
    "$$v",
    "expression",
    "show-toolbar",
    "cancel",
    "confirm",
    "rows",
    "autosize",
    "maxlength",
    "show-word-limit",
    "staticClass",
    "_l",
    "item",
    "key",
    "after-read",
    "accept",
    "max-size",
    "round",
    "block",
    "native-type",
    "staticRenderFns",
    "Component",
    "__webpack_require__",
    "normalizeComponent",
    "ssrContext",
    "__webpack_exports__"
  ],
  "mappings": "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",
  "file": "static/js/11.20e4d140401c60c68ef5.js",
  "sourcesContent": [
    "<template>\r\n  <div>\r\n    <van-nav-bar title=\"宿舍报修\"/>\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-field\r\n        label=\"报修类型\"\r\n        :value=\"type_val\"\r\n        readonly\r\n        :rules=\"[{ required: true, message: '请选择报修类型' }]\"\r\n        name=\"room_repair_type\"\r\n        placeholder=\"点击选择\"\r\n        @click=\"show = true\"\r\n      />\r\n      <van-popup v-model=\"show\" position=\"bottom\">\r\n        <van-picker :columns=\"columns\" show-toolbar @cancel=\"show = false\" @confirm=\"onConfirm\" />\r\n      </van-popup>\r\n      <van-field\r\n        name=\"room_repair_describe\"\r\n        v-model=\"fault\"\r\n        rows=\"2\"\r\n        autosize\r\n        label=\"故障描述\"\r\n        :rules=\"[{ required: true, message: '请填写故障描述' }]\"\r\n        type=\"textarea\"\r\n        maxlength=\"30\"\r\n        placeholder=\"请输入\"\r\n        show-word-limit\r\n      />\r\n      <div class=\"upload-images\">\r\n        <div class=\"img-box\" v-for=\"(item,index) in uploadImages\" :key=\"index\">\r\n          <div class=\"icon-po\">\r\n            <img class=\"image\" :src=\"item\" @click=\"look_img(uploadImages,index)\"/>\r\n            <div class=\"icon-close\" @click=\"imgclose(index)\">×</div>\r\n          </div>\r\n        </div>\r\n        <van-uploader\r\n          :after-read=\"onRead\"\r\n          accept=\"image/gif, image/jpeg, image/png\"\r\n          :max-size=\"6000000\"\r\n        ></van-uploader>\r\n      </div>\r\n      <van-button round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { apirepairtypelist } from \"@/api/index\";\r\nimport { apiroomrepairsave } from \"@/api/index\";\r\nimport { Toast } from 'vant';\r\nimport { ImagePreview } from 'vant';\r\nexport default {\r\n  name: \"addRepair\",\r\n  data() {\r\n    return {\r\n      files: {\r\n        name: \"\",\r\n        type: \"\"\r\n      },\r\n      headerImage: null,\r\n      type_val: \"\",\r\n      columns: [],\r\n      placeholder: \"选择\",\r\n      show: false,\r\n      fault: \"\",\r\n      uploadImages: []\r\n    };\r\n  },\r\n  methods: {\r\n    onConfirm(values) {\r\n      if (typeof values !== \"string\") {\r\n        values = values.toString();\r\n      }\r\n      this.type_val = values.split(\",\").join(\"-\");\r\n      this.show = false;\r\n    },\r\n    onSubmit(values) {\r\n      this.$loading('提交中');\r\n      values.image_src = this.uploadImages;\r\n      values.image_src = this.uploadImages;\r\n      if(values.image_src.length<1) {\r\n          Toast(\"请上传图片\")\r\n          this.$loading.close();\r\n          return false;\r\n      }\r\n      apiroomrepairsave(values).then(res => {\r\n        if(res.data.code==200){\r\n           this.$loading.close();\r\n            Toast.success(res.data.msg);\r\n            setTimeout(() =>{\r\n                // this.$router.go(-1);\r\n                this.$router.push({\r\n                    path:\"/repairlist\"\r\n                });\r\n            },3000);\r\n        }else{\r\n            this.$loading.close();\r\n            Toast.fail(res.data.msg);\r\n        }     \r\n      });\r\n    },\r\n    getreparilist() {\r\n      let params = {\r\n        repair_type: \"宿舍\"\r\n      };\r\n      apirepairtypelist(params).then(res => {\r\n        console.log(res.data.data);\r\n        this.columns = res.data.data;\r\n      });\r\n    },\r\n    look_img(img,index){\r\n      ImagePreview({\r\n        images:img,\r\n        startPosition: index,\r\n      });\r\n    },\r\n    imgclose(e) {\r\n      this.uploadImages.splice(e, 1);\r\n    },\r\n    // 组件方法 获取 流\r\n    async onRead(file) {\r\n      this.$loading('图片上传中...');\r\n      let self = this;\r\n      self.files.name = file.file.name; // 获取文件名\r\n      self.files.type = file.file.type; // 获取类型\r\n      self.imgPreview(file.file);\r\n    },\r\n    // 处理图片\r\n    imgPreview(file) {\r\n      let self = this;\r\n      let Orientation;\r\n      //去获取拍照时的信息，解决拍出来的照片旋转问题\r\n      // EXIF.getData(file, function () {\r\n      //   Orientation = EXIF.getTag(this, \"Orientation\");\r\n      // });\r\n      // 看支持不支持FileReader\r\n      if (!file || !window.FileReader) return;\r\n      if (/^image/.test(file.type)) {\r\n        // 创建一个reader\r\n        let reader = new FileReader();\r\n        // 将图片2将转成 base64 格式\r\n        reader.readAsDataURL(file);\r\n        // 读取成功后的回调\r\n        reader.onloadend = function() {\r\n          // console.log(this.result);\r\n          let result = this.result;\r\n          let img = new Image();\r\n          img.src = result;\r\n          //判断图片是否大于500K,是就直接上传，反之压缩图片\r\n          if (this.result.length <= 500 * 1024) {\r\n            self.headerImage = this.result;\r\n            self.postImg();\r\n          } else {\r\n            img.onload = function() {\r\n              let data = self.compress(img, Orientation);\r\n              self.headerImage = data;\r\n              self.postImg();\r\n            };\r\n          }\r\n        };\r\n      }\r\n    },\r\n    // 压缩图片\r\n    compress(img, Orientation) {\r\n      let canvas = document.createElement(\"canvas\");\r\n      let ctx = canvas.getContext(\"2d\");\r\n      //瓦片canvas\r\n      let tCanvas = document.createElement(\"canvas\");\r\n      let tctx = tCanvas.getContext(\"2d\");\r\n      // let initSize = img.src.length;\r\n      let width = img.width;\r\n      let height = img.height;\r\n      //如果图片大于四百万像素，计算压缩比并将大小压至400万以下\r\n      let ratio;\r\n      if ((ratio = (width * height) / 4000000) > 1) {\r\n        // console.log(\"大于400万像素\");\r\n        ratio = Math.sqrt(ratio);\r\n        width /= ratio;\r\n        height /= ratio;\r\n      } else {\r\n        ratio = 1;\r\n      }\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      //    铺底色\r\n      ctx.fillStyle = \"#fff\";\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      //如果图片像素大于100万则使用瓦片绘制\r\n      let count;\r\n      if ((count = (width * height) / 1000000) > 1) {\r\n        // console.log(\"超过100W像素\");\r\n        count = ~~(Math.sqrt(count) + 1); //计算要分成多少块瓦片\r\n        //      计算每块瓦片的宽和高\r\n        let nw = ~~(width / count);\r\n        let nh = ~~(height / count);\r\n        tCanvas.width = nw;\r\n        tCanvas.height = nh;\r\n        for (let i = 0; i < count; i++) {\r\n          for (let j = 0; j < count; j++) {\r\n            tctx.drawImage(\r\n              img,\r\n              i * nw * ratio,\r\n              j * nh * ratio,\r\n              nw * ratio,\r\n              nh * ratio,\r\n              0,\r\n              0,\r\n              nw,\r\n              nh\r\n            );\r\n            ctx.drawImage(tCanvas, i * nw, j * nh, nw, nh);\r\n          }\r\n        }\r\n      } else {\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n      }\r\n      //修复ios上传图片的时候 被旋转的问题\r\n      if (Orientation != \"\" && Orientation != 1) {\r\n        switch (Orientation) {\r\n          case 6: //需要顺时针（向左）90度旋转\r\n            this.rotateImg(img, \"left\", canvas);\r\n            break;\r\n          case 8: //需要逆时针（向右）90度旋转\r\n            this.rotateImg(img, \"right\", canvas);\r\n            break;\r\n          case 3: //需要180度旋转\r\n            this.rotateImg(img, \"right\", canvas); //转两次\r\n            this.rotateImg(img, \"right\", canvas);\r\n            break;\r\n        }\r\n      }\r\n      //进行最小压缩\r\n      let ndata = canvas.toDataURL(\"image/jpeg\", 0.6);\r\n      tCanvas.width = tCanvas.height = canvas.width = canvas.height = 0;\r\n      return ndata;\r\n    },\r\n    // 旋转图片\r\n    rotateImg(img, direction, canvas) {\r\n      //最小与最大旋转方向，图片旋转4次后回到原方向\r\n      const min_step = 0;\r\n      const max_step = 3;\r\n      if (img == null) return;\r\n      //img的高度和宽度不能在img元素隐藏后获取，否则会出错\r\n      let height = img.height;\r\n      let width = img.width;\r\n      let step = 2;\r\n      if (step == null) {\r\n        step = min_step;\r\n      }\r\n      if (direction == \"right\") {\r\n        step++;\r\n        //旋转到原位置，即超过最大值\r\n        step > max_step && (step = min_step);\r\n      } else {\r\n        step--;\r\n        step < min_step && (step = max_step);\r\n      }\r\n      //旋转角度以弧度值为参数\r\n      let degree = (step * 90 * Math.PI) / 180;\r\n      let ctx = canvas.getContext(\"2d\");\r\n      switch (step) {\r\n        case 0:\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n          ctx.drawImage(img, 0, 0);\r\n          break;\r\n        case 1:\r\n          canvas.width = height;\r\n          canvas.height = width;\r\n          ctx.rotate(degree);\r\n          ctx.drawImage(img, 0, -height);\r\n          break;\r\n        case 2:\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n          ctx.rotate(degree);\r\n          ctx.drawImage(img, -width, -height);\r\n          break;\r\n        case 3:\r\n          canvas.width = height;\r\n          canvas.height = width;\r\n          ctx.rotate(degree);\r\n          ctx.drawImage(img, -width, 0);\r\n          break;\r\n      }\r\n    },\r\n    //将base64转换为文件\r\n    dataURLtoFile(dataurl) {\r\n      var arr = dataurl.split(\",\"),\r\n        bstr = atob(arr[1]),\r\n        n = bstr.length,\r\n        u8arr = new Uint8Array(n);\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      return new File([u8arr], this.files.name, {\r\n        type: this.files.type\r\n      });\r\n    },\r\n    //这里写接口\r\n    async postImg() {\r\n      let file = this.dataURLtoFile(this.headerImage);\r\n      let formData = new window.FormData();\r\n      formData.append(\"file\", file);\r\n      try {\r\n        axios({\r\n          method: \"post\",\r\n          url: \"http://47.104.193.180:18086/fastfds-uploader/v3\",\r\n          data: formData\r\n        }).then(res => {\r\n          let str = res.data.url;\r\n          this.uploadImages.push(str); //将图片地址存入一个数组中\r\n          this.$loading.close();\r\n        });\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n      this.getreparilist();\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/repair/add_repair.vue",
    "var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"宿舍报修\"}}),_vm._v(\" \"),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"label\":\"报修类型\",\"value\":_vm.type_val,\"readonly\":\"\",\"rules\":[{ required: true, message: '请选择报修类型' }],\"name\":\"room_repair_type\",\"placeholder\":\"点击选择\"},on:{\"click\":function($event){_vm.show = true}}}),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-picker',{attrs:{\"columns\":_vm.columns,\"show-toolbar\":\"\"},on:{\"cancel\":function($event){_vm.show = false},\"confirm\":_vm.onConfirm}})],1),_vm._v(\" \"),_c('van-field',{attrs:{\"name\":\"room_repair_describe\",\"rows\":\"2\",\"autosize\":\"\",\"label\":\"故障描述\",\"rules\":[{ required: true, message: '请填写故障描述' }],\"type\":\"textarea\",\"maxlength\":\"30\",\"placeholder\":\"请输入\",\"show-word-limit\":\"\"},model:{value:(_vm.fault),callback:function ($$v) {_vm.fault=$$v},expression:\"fault\"}}),_vm._v(\" \"),_c('div',{staticClass:\"upload-images\"},[_vm._l((_vm.uploadImages),function(item,index){return _c('div',{key:index,staticClass:\"img-box\"},[_c('div',{staticClass:\"icon-po\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":item},on:{\"click\":function($event){return _vm.look_img(_vm.uploadImages,index)}}}),_vm._v(\" \"),_c('div',{staticClass:\"icon-close\",on:{\"click\":function($event){return _vm.imgclose(index)}}},[_vm._v(\"×\")])])])}),_vm._v(\" \"),_c('van-uploader',{attrs:{\"after-read\":_vm.onRead,\"accept\":\"image/gif, image/jpeg, image/png\",\"max-size\":6000000}})],2),_vm._v(\" \"),_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-600fc21a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/repair/add_repair.vue\n// module id = null\n// module chunks = ",
    "function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-600fc21a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add_repair.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add_repair.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add_repair.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-600fc21a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add_repair.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/repair/add_repair.vue\n// module id = null\n// module chunks = "
  ],
  "sourceRoot": ""
}
