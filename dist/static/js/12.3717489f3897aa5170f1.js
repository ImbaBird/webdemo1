webpackJsonp([12],{"6zUH":function(e,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=i("Fd2+"),a=i("gyMJ"),n={name:"dormDistribute",data:function(){return{fid:"",frepair_type:"",frepair_build:"",frepair_person_name:"",room_num:"",frepair_date:"",area:"",frservice_describe:"",img:[],remark:"",repair_person:[],showPicker:!1,repairPerson:"",repair_user_id:"",show:!1,repair_fin_out:"",repair_finout:["内修","外修","驳回"]}},methods:{getimg:function(){Object(t.b)(this.img)},getrepairinfo:function(){var e=this,r={fid:this.fid};Object(a.h)(r).then(function(r){console.log(r.data.data);var i=r.data.data[0];e.frepair_type=i.room_repair_type,e.frepair_build=i.floor_num,e.frservice_describe=i.room_repair_describe,e.frepair_person_name=i.person_name,e.room_num=i.room_num;for(var t=0;t<i.file_path.length;t++)e.img.push(i.file_path[t].url)})},getrepair_person:function(){var e=this,r={fid:this.fid};Object(a.k)(r).then(function(r){console.log(r.data),e.repair_person=r.data.data})},person_confirm:function(e){this.repairPerson=e.repair_user,this.repair_user_id=e.fid,this.showPicker=!1},finout_confirm:function(e){this.repair_fin_out=e,this.show=!1},onSubmit:function(){var e=this;this.$loading("提交中"),Object(a.g)(data).then(function(r){200==r.data.code?(e.$loading.close(),t.c.success(r.data.msg),setTimeout(function(){e.$router.push({path:"/waitdistribute"})},3e3)):(e.$loading.close(),t.c.success(r.data.msg))})}},created:function(){this.fid=this.$route.query.fid,this.getrepairinfo(),this.getrepair_person()}},o={render:function(){var e=this,r=e.$createElement,i=e._self._c||r;return i("div",[i("van-nav-bar",{attrs:{title:"报修分配（宿舍）"}}),e._v(" "),i("van-field",{staticStyle:{display:"none"},attrs:{name:"fid"},model:{value:e.fid,callback:function(r){e.fid=r},expression:"fid"}}),e._v(" "),i("van-cell",{attrs:{title:"报修人:",value:e.frepair_person_name}}),e._v(" "),i("van-cell",{attrs:{title:"楼号:",value:e.frepair_build}}),e._v(" "),i("van-cell",{attrs:{title:"房间号:",value:e.room_num}}),e._v(" "),i("van-cell",{attrs:{title:"报修类型:",value:e.frepair_type}}),e._v(" "),i("van-cell",{attrs:{title:"故障描述:",value:e.frservice_describe}}),e._v(" "),i("van-button",{staticStyle:{width:"90%",margin:"10px auto"},attrs:{type:"info",plain:"",block:""},on:{click:function(r){return e.getimg()}}},[e._v("查看维修图片")]),e._v(" "),i("van-field",{attrs:{readonly:"",clickable:"",value:e.repairPerson,label:"维修工",placeholder:"点击选择维修工"},on:{click:function(r){e.showPicker=!0}}}),e._v(" "),i("van-field",{staticStyle:{display:"none"},attrs:{name:"repair_user_id",label:"维修工："},model:{value:e.repair_user_id,callback:function(r){e.repair_user_id=r},expression:"repair_user_id"}}),e._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(r){e.showPicker=r},expression:"showPicker"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:e.repair_person,"value-key":"repair_user"},on:{confirm:e.person_confirm,cancel:function(r){e.showPicker=!1}}})],1),e._v(" "),i("van-field",{attrs:{readonly:"",clickable:"",name:"repair_fin_out",value:e.repair_fin_out,label:"维修类型",placeholder:"点击选择维修类型"},on:{click:function(r){e.show=!0}}}),e._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:e.show,callback:function(r){e.show=r},expression:"show"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:e.repair_finout},on:{confirm:e.finout_confirm,cancel:function(r){e.show=!1}}})],1),e._v(" "),i("van-field",{attrs:{name:"message",rows:"2",autosize:"",label:"备注",type:"textarea",maxlength:"100",placeholder:"请输入","show-word-limit":""},model:{value:e.remark,callback:function(r){e.remark=r},expression:"remark"}}),e._v(" "),i("van-button",{staticStyle:{width:"100%",position:"fixed",bottom:"0px",left:"0px"},attrs:{block:"",type:"info"},on:{click:function(r){return e.onSubmit()}}},[e._v("提交")])],1)},staticRenderFns:[]};var s=i("VU/8")(n,o,!1,function(e){i("UQLM")},null,null);r.default=s.exports},UQLM:function(e,r){}});
//# sourceMappingURL=12.3717489f3897aa5170f1.js.map